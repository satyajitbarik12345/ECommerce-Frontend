{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Form,Button}from'react-bootstrap';import{createProduct}from'../actions/productActions';import{useHistory}from'react-router';import{checkTokenValidation,logout}from'../actions/userActions';import{CREATE_PRODUCT_RESET}from'../constants';import Message from'../components/Message';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductCreatePage=()=>{let history=useHistory();const dispatch=useDispatch();const[name,setName]=useState(\"\");const[description,setDescription]=useState(\"\");const[price,setPrice]=useState(\"\");const[stock,setStock]=useState(false);const[image,setImage]=useState(null);// login reducer\nconst userLoginReducer=useSelector(state=>state.userLoginReducer);const{userInfo}=userLoginReducer;// create product reducer\nconst createProductReducer=useSelector(state=>state.createProductReducer);const{product,success:productCreationSuccess,error:productCreationError}=createProductReducer;// check token validation reducer\nconst checkTokenValidationReducer=useSelector(state=>state.checkTokenValidationReducer);const{error:tokenError}=checkTokenValidationReducer;useEffect(()=>{if(!userInfo){history.push(\"/login\");}dispatch(checkTokenValidation());},[dispatch,userInfo,history]);const onSubmit=e=>{e.preventDefault();let form_data=new FormData();form_data.append('name',name);form_data.append('description',description);form_data.append('price',price);form_data.append('stock',stock);form_data.append('image',image);dispatch(createProduct(form_data));};if(productCreationSuccess){alert(\"Product successfully created.\");history.push(`/product/${product.id}/`);dispatch({type:CREATE_PRODUCT_RESET});}if(userInfo&&tokenError===\"Request failed with status code 401\"){alert(\"Session expired, please login again.\");dispatch(logout());history.push(\"/login\");window.location.reload();}return/*#__PURE__*/_jsxs(\"div\",{children:[productCreationError&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:productCreationError.image[0]}),/*#__PURE__*/_jsx(\"span\",{className:\"d-flex justify-content-center text-info\",children:/*#__PURE__*/_jsx(\"em\",{children:\"New Product\"})}),/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:/*#__PURE__*/_jsx(\"b\",{children:\"Product Name\"})}),/*#__PURE__*/_jsx(Form.Control,{required:true,autoFocus:true,type:\"text\",value:name,placeholder:\"product name\",onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"description\",children:[/*#__PURE__*/_jsx(Form.Label,{children:/*#__PURE__*/_jsx(\"b\",{children:\"Product Description\"})}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",value:description,placeholder:\"product description\",onChange:e=>setDescription(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"price\",children:[/*#__PURE__*/_jsx(Form.Label,{children:/*#__PURE__*/_jsx(\"b\",{children:\"Price\"})}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",pattern:\"[0-9]+(\\\\.[0-9]{1,2})?%?\",value:price,placeholder:\"199.99\",step:\"0.01\",maxLength:\"8\",onChange:e=>setPrice(e.target.value)})]}),/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"label\",{children:\"In Stock\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:stock,className:\"ml-2 mt-2\",onChange:()=>setStock(!stock)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"image\",children:[/*#__PURE__*/_jsx(Form.Label,{children:/*#__PURE__*/_jsx(\"b\",{children:\"Product Image\"})}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"file\",onChange:e=>setImage(e.target.files[0])})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"success\",className:\"btn-sm button-focus-css\",children:\"Save Product\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",className:\"btn-sm ml-2 button-focus-css\",onClick:()=>history.push(\"/\"),children:\"Cancel\"})]})]});};export default ProductCreatePage;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","Form","Button","createProduct","useHistory","checkTokenValidation","logout","CREATE_PRODUCT_RESET","Message","jsx","_jsx","jsxs","_jsxs","ProductCreatePage","history","dispatch","name","setName","description","setDescription","price","setPrice","stock","setStock","image","setImage","userLoginReducer","state","userInfo","createProductReducer","product","success","productCreationSuccess","error","productCreationError","checkTokenValidationReducer","tokenError","push","onSubmit","e","preventDefault","form_data","FormData","append","alert","id","type","window","location","reload","children","variant","className","Group","controlId","Label","Control","required","autoFocus","value","placeholder","onChange","target","pattern","step","maxLength","style","display","files","onClick"],"sources":["E:/FrontendEcommerce/frontend/src/pages/ProductCreatePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Form, Button } from 'react-bootstrap'\nimport { createProduct } from '../actions/productActions'\nimport { useHistory } from 'react-router'\nimport { checkTokenValidation, logout } from '../actions/userActions'\nimport { CREATE_PRODUCT_RESET } from '../constants'\nimport Message from '../components/Message';\n\n\nconst ProductCreatePage = () => {\n\n    let history = useHistory()\n    const dispatch = useDispatch()\n\n    const [name, setName] = useState(\"\")\n    const [description, setDescription] = useState(\"\")\n    const [price, setPrice] = useState(\"\")\n    const [stock, setStock] = useState(false)\n    const [image, setImage] = useState(null)\n\n    // login reducer\n    const userLoginReducer = useSelector(state => state.userLoginReducer)\n    const { userInfo } = userLoginReducer\n\n    // create product reducer\n    const createProductReducer = useSelector(state => state.createProductReducer)\n    const { product, success: productCreationSuccess, error: productCreationError } = createProductReducer\n\n    // check token validation reducer\n    const checkTokenValidationReducer = useSelector(state => state.checkTokenValidationReducer)\n    const { error: tokenError } = checkTokenValidationReducer\n\n    useEffect(() => {\n        if (!userInfo) {\n            history.push(\"/login\")\n        }\n        dispatch(checkTokenValidation())\n    }, [dispatch, userInfo, history])\n\n    const onSubmit = (e) => {\n        e.preventDefault()\n\n        let form_data = new FormData()\n        form_data.append('name', name)\n        form_data.append('description', description)\n        form_data.append('price', price)\n        form_data.append('stock', stock)\n        form_data.append('image', image)\n\n        dispatch(createProduct(form_data))\n    }\n\n    if (productCreationSuccess) {\n        alert(\"Product successfully created.\")\n        history.push(`/product/${product.id}/`)\n        dispatch({\n            type: CREATE_PRODUCT_RESET\n        })\n    }\n\n    if (userInfo && tokenError === \"Request failed with status code 401\") {\n        alert(\"Session expired, please login again.\")\n        dispatch(logout())\n        history.push(\"/login\")\n        window.location.reload()\n    }\n\n    return (\n        <div>\n            {productCreationError && <Message variant='danger'>{productCreationError.image[0]}</Message>}\n            <span\n                className=\"d-flex justify-content-center text-info\"\n                >\n                <em>New Product</em>\n            </span>\n            <Form onSubmit={onSubmit}>\n\n                <Form.Group controlId='name'>\n                    <Form.Label>\n                        <b>\n                            Product Name\n                        </b>\n                    </Form.Label>\n                    <Form.Control\n                        required\n                        autoFocus={true}\n                        type=\"text\"\n                        value={name}\n                        placeholder=\"product name\"\n                        onChange={(e) => setName(e.target.value)}\n                    >\n                    </Form.Control>\n                </Form.Group>\n\n                <Form.Group controlId='description'>\n                    <Form.Label>\n                        <b>\n                            Product Description\n                        </b>\n                    </Form.Label>\n                    <Form.Control\n                        required\n                        type=\"text\"\n                        value={description}\n                        placeholder=\"product description\"\n                        onChange={(e) => setDescription(e.target.value)}\n                    >\n                    </Form.Control>\n                </Form.Group>\n\n                <Form.Group controlId='price'>\n                    <Form.Label>\n                        <b>\n                            Price\n                        </b>\n                    </Form.Label>\n                    <Form.Control\n                        required\n                        type=\"text\"\n                        pattern=\"[0-9]+(\\.[0-9]{1,2})?%?\"\n                        value={price}\n                        placeholder=\"199.99\"\n                        step=\"0.01\"\n                        maxLength=\"8\"\n                        onChange={(e) => setPrice(e.target.value)}\n                    >\n                    </Form.Control>\n                </Form.Group>\n\n                <span style={{ display: \"flex\" }}>\n                    <label>In Stock</label>\n                    <input\n                        type=\"checkbox\"\n                        value={stock}\n                        className=\"ml-2 mt-2\"\n                        onChange={() => setStock(!stock)}\n                    />\n                </span>\n\n                <Form.Group controlId='image'>\n                    <Form.Label>\n                        <b>\n                            Product Image\n                        </b>\n                    </Form.Label>\n                    <Form.Control\n                        required\n                        type=\"file\"\n                        onChange={(e) => setImage(e.target.files[0])}\n                    >\n                    </Form.Control>\n                </Form.Group>\n\n                <Button\n                    type=\"submit\"\n                    variant='success'\n                    className=\"btn-sm button-focus-css\"\n                >\n                    Save Product\n                </Button>\n                <Button\n                    type=\"submit\"\n                    variant='primary'\n                    className=\"btn-sm ml-2 button-focus-css\"\n                    onClick={() => history.push(\"/\")}\n                >\n                    Cancel\n                </Button>\n            </Form>\n        </div>\n    )\n}\n\nexport default ProductCreatePage\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,IAAI,CAAEC,MAAM,KAAQ,iBAAiB,CAC9C,OAASC,aAAa,KAAQ,2BAA2B,CACzD,OAASC,UAAU,KAAQ,cAAc,CACzC,OAASC,oBAAoB,CAAEC,MAAM,KAAQ,wBAAwB,CACrE,OAASC,oBAAoB,KAAQ,cAAc,CACnD,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAG5C,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAE5B,GAAI,CAAAC,OAAO,CAAGV,UAAU,CAAC,CAAC,CAC1B,KAAM,CAAAW,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACiB,IAAI,CAAEC,OAAO,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACqB,WAAW,CAAEC,cAAc,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACuB,KAAK,CAAEC,QAAQ,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACyB,KAAK,CAAEC,QAAQ,CAAC,CAAG1B,QAAQ,CAAC,KAAK,CAAC,CACzC,KAAM,CAAC2B,KAAK,CAAEC,QAAQ,CAAC,CAAG5B,QAAQ,CAAC,IAAI,CAAC,CAExC;AACA,KAAM,CAAA6B,gBAAgB,CAAG1B,WAAW,CAAC2B,KAAK,EAAIA,KAAK,CAACD,gBAAgB,CAAC,CACrE,KAAM,CAAEE,QAAS,CAAC,CAAGF,gBAAgB,CAErC;AACA,KAAM,CAAAG,oBAAoB,CAAG7B,WAAW,CAAC2B,KAAK,EAAIA,KAAK,CAACE,oBAAoB,CAAC,CAC7E,KAAM,CAAEC,OAAO,CAAEC,OAAO,CAAEC,sBAAsB,CAAEC,KAAK,CAAEC,oBAAqB,CAAC,CAAGL,oBAAoB,CAEtG;AACA,KAAM,CAAAM,2BAA2B,CAAGnC,WAAW,CAAC2B,KAAK,EAAIA,KAAK,CAACQ,2BAA2B,CAAC,CAC3F,KAAM,CAAEF,KAAK,CAAEG,UAAW,CAAC,CAAGD,2BAA2B,CAEzDrC,SAAS,CAAC,IAAM,CACZ,GAAI,CAAC8B,QAAQ,CAAE,CACXd,OAAO,CAACuB,IAAI,CAAC,QAAQ,CAAC,CAC1B,CACAtB,QAAQ,CAACV,oBAAoB,CAAC,CAAC,CAAC,CACpC,CAAC,CAAE,CAACU,QAAQ,CAAEa,QAAQ,CAAEd,OAAO,CAAC,CAAC,CAEjC,KAAM,CAAAwB,QAAQ,CAAIC,CAAC,EAAK,CACpBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,GAAI,CAAAC,SAAS,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC9BD,SAAS,CAACE,MAAM,CAAC,MAAM,CAAE3B,IAAI,CAAC,CAC9ByB,SAAS,CAACE,MAAM,CAAC,aAAa,CAAEzB,WAAW,CAAC,CAC5CuB,SAAS,CAACE,MAAM,CAAC,OAAO,CAAEvB,KAAK,CAAC,CAChCqB,SAAS,CAACE,MAAM,CAAC,OAAO,CAAErB,KAAK,CAAC,CAChCmB,SAAS,CAACE,MAAM,CAAC,OAAO,CAAEnB,KAAK,CAAC,CAEhCT,QAAQ,CAACZ,aAAa,CAACsC,SAAS,CAAC,CAAC,CACtC,CAAC,CAED,GAAIT,sBAAsB,CAAE,CACxBY,KAAK,CAAC,+BAA+B,CAAC,CACtC9B,OAAO,CAACuB,IAAI,CAAC,YAAYP,OAAO,CAACe,EAAE,GAAG,CAAC,CACvC9B,QAAQ,CAAC,CACL+B,IAAI,CAAEvC,oBACV,CAAC,CAAC,CACN,CAEA,GAAIqB,QAAQ,EAAIQ,UAAU,GAAK,qCAAqC,CAAE,CAClEQ,KAAK,CAAC,sCAAsC,CAAC,CAC7C7B,QAAQ,CAACT,MAAM,CAAC,CAAC,CAAC,CAClBQ,OAAO,CAACuB,IAAI,CAAC,QAAQ,CAAC,CACtBU,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC5B,CAEA,mBACIrC,KAAA,QAAAsC,QAAA,EACKhB,oBAAoB,eAAIxB,IAAA,CAACF,OAAO,EAAC2C,OAAO,CAAC,QAAQ,CAAAD,QAAA,CAAEhB,oBAAoB,CAACV,KAAK,CAAC,CAAC,CAAC,CAAU,CAAC,cAC5Fd,IAAA,SACI0C,SAAS,CAAC,yCAAyC,CAAAF,QAAA,cAEnDxC,IAAA,OAAAwC,QAAA,CAAI,aAAW,CAAI,CAAC,CAClB,CAAC,cACPtC,KAAA,CAACX,IAAI,EAACqC,QAAQ,CAAEA,QAAS,CAAAY,QAAA,eAErBtC,KAAA,CAACX,IAAI,CAACoD,KAAK,EAACC,SAAS,CAAC,MAAM,CAAAJ,QAAA,eACxBxC,IAAA,CAACT,IAAI,CAACsD,KAAK,EAAAL,QAAA,cACPxC,IAAA,MAAAwC,QAAA,CAAG,cAEH,CAAG,CAAC,CACI,CAAC,cACbxC,IAAA,CAACT,IAAI,CAACuD,OAAO,EACTC,QAAQ,MACRC,SAAS,CAAE,IAAK,CAChBZ,IAAI,CAAC,MAAM,CACXa,KAAK,CAAE3C,IAAK,CACZ4C,WAAW,CAAC,cAAc,CAC1BC,QAAQ,CAAGtB,CAAC,EAAKtB,OAAO,CAACsB,CAAC,CAACuB,MAAM,CAACH,KAAK,CAAE,CAE/B,CAAC,EACP,CAAC,cAEb/C,KAAA,CAACX,IAAI,CAACoD,KAAK,EAACC,SAAS,CAAC,aAAa,CAAAJ,QAAA,eAC/BxC,IAAA,CAACT,IAAI,CAACsD,KAAK,EAAAL,QAAA,cACPxC,IAAA,MAAAwC,QAAA,CAAG,qBAEH,CAAG,CAAC,CACI,CAAC,cACbxC,IAAA,CAACT,IAAI,CAACuD,OAAO,EACTC,QAAQ,MACRX,IAAI,CAAC,MAAM,CACXa,KAAK,CAAEzC,WAAY,CACnB0C,WAAW,CAAC,qBAAqB,CACjCC,QAAQ,CAAGtB,CAAC,EAAKpB,cAAc,CAACoB,CAAC,CAACuB,MAAM,CAACH,KAAK,CAAE,CAEtC,CAAC,EACP,CAAC,cAEb/C,KAAA,CAACX,IAAI,CAACoD,KAAK,EAACC,SAAS,CAAC,OAAO,CAAAJ,QAAA,eACzBxC,IAAA,CAACT,IAAI,CAACsD,KAAK,EAAAL,QAAA,cACPxC,IAAA,MAAAwC,QAAA,CAAG,OAEH,CAAG,CAAC,CACI,CAAC,cACbxC,IAAA,CAACT,IAAI,CAACuD,OAAO,EACTC,QAAQ,MACRX,IAAI,CAAC,MAAM,CACXiB,OAAO,CAAC,0BAAyB,CACjCJ,KAAK,CAAEvC,KAAM,CACbwC,WAAW,CAAC,QAAQ,CACpBI,IAAI,CAAC,MAAM,CACXC,SAAS,CAAC,GAAG,CACbJ,QAAQ,CAAGtB,CAAC,EAAKlB,QAAQ,CAACkB,CAAC,CAACuB,MAAM,CAACH,KAAK,CAAE,CAEhC,CAAC,EACP,CAAC,cAEb/C,KAAA,SAAMsD,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAjB,QAAA,eAC7BxC,IAAA,UAAAwC,QAAA,CAAO,UAAQ,CAAO,CAAC,cACvBxC,IAAA,UACIoC,IAAI,CAAC,UAAU,CACfa,KAAK,CAAErC,KAAM,CACb8B,SAAS,CAAC,WAAW,CACrBS,QAAQ,CAAEA,CAAA,GAAMtC,QAAQ,CAAC,CAACD,KAAK,CAAE,CACpC,CAAC,EACA,CAAC,cAEPV,KAAA,CAACX,IAAI,CAACoD,KAAK,EAACC,SAAS,CAAC,OAAO,CAAAJ,QAAA,eACzBxC,IAAA,CAACT,IAAI,CAACsD,KAAK,EAAAL,QAAA,cACPxC,IAAA,MAAAwC,QAAA,CAAG,eAEH,CAAG,CAAC,CACI,CAAC,cACbxC,IAAA,CAACT,IAAI,CAACuD,OAAO,EACTC,QAAQ,MACRX,IAAI,CAAC,MAAM,CACXe,QAAQ,CAAGtB,CAAC,EAAKd,QAAQ,CAACc,CAAC,CAACuB,MAAM,CAACM,KAAK,CAAC,CAAC,CAAC,CAAE,CAEnC,CAAC,EACP,CAAC,cAEb1D,IAAA,CAACR,MAAM,EACH4C,IAAI,CAAC,QAAQ,CACbK,OAAO,CAAC,SAAS,CACjBC,SAAS,CAAC,yBAAyB,CAAAF,QAAA,CACtC,cAED,CAAQ,CAAC,cACTxC,IAAA,CAACR,MAAM,EACH4C,IAAI,CAAC,QAAQ,CACbK,OAAO,CAAC,SAAS,CACjBC,SAAS,CAAC,8BAA8B,CACxCiB,OAAO,CAAEA,CAAA,GAAMvD,OAAO,CAACuB,IAAI,CAAC,GAAG,CAAE,CAAAa,QAAA,CACpC,QAED,CAAQ,CAAC,EACP,CAAC,EACN,CAAC,CAEd,CAAC,CAED,cAAe,CAAArC,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}