{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{deleteProduct,getProductDetails}from'../actions/productActions';import Message from'../components/Message';import{Spinner,Row,Col,Container,Card,Button,Modal}from'react-bootstrap';import{Link}from'react-router-dom';import{CREATE_PRODUCT_RESET,DELETE_PRODUCT_RESET,UPDATE_PRODUCT_RESET,CARD_CREATE_RESET}from'../constants';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductDetailsPage(_ref){let{history,match}=_ref;const dispatch=useDispatch();// modal state and functions\nconst[show,setShow]=useState(false);const handleClose=()=>setShow(false);const handleShow=()=>setShow(true);// product details reducer\nconst productDetailsReducer=useSelector(state=>state.productDetailsReducer);const{loading,error,product}=productDetailsReducer;// login reducer\nconst userLoginReducer=useSelector(state=>state.userLoginReducer);const{userInfo}=userLoginReducer;// product details reducer\nconst deleteProductReducer=useSelector(state=>state.deleteProductReducer);const{success:productDeletionSuccess}=deleteProductReducer;useEffect(()=>{dispatch(getProductDetails(match.params.id));dispatch({type:UPDATE_PRODUCT_RESET});dispatch({type:CREATE_PRODUCT_RESET});dispatch({type:CARD_CREATE_RESET});},[dispatch,match]);// product delete confirmation\nconst confirmDelete=()=>{dispatch(deleteProduct(match.params.id));handleClose();};// after product deletion\nif(productDeletionSuccess){alert(\"Product successfully deleted.\");history.push(\"/\");dispatch({type:DELETE_PRODUCT_RESET});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[/*#__PURE__*/_jsx(\"i\",{style:{color:\"#e6e600\"},className:\"fas fa-exclamation-triangle\"}),\" \",\"Delete Confirmation\"]})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[\"Are you sure you want to delete this product \",/*#__PURE__*/_jsxs(\"em\",{children:[\"\\\"\",product.name,\"\\\"\"]}),\"?\"]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>confirmDelete(),children:\"Confirm Delete\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleClose,children:\"Cancel\"})]})]})}),loading&&/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Getting Product Details\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})})]}),error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:product.image,height:\"420\"}),userInfo&&userInfo.admin?/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn mt-2 btn-danger btn-sm button-focus-css\",style:{width:\"100%\"},onClick:()=>handleShow(),children:\"Delete Product\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ml-2 mt-2 btn btn-primary btn-sm button-focus-css\",onClick:()=>history.push(`/product-update/${product.id}/`),style:{width:\"100%\"},children:\"Edit Product\"})]}):\"\"]}),/*#__PURE__*/_jsxs(Col,{sm:true,children:[/*#__PURE__*/_jsx(\"b\",{children:product.name}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"justify-description-css\",children:/*#__PURE__*/_jsx(\"p\",{children:product.description})}),/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\",justifyContent:\"center\",border:\"1px solid\",borderColor:\"#C6ACE7\",padding:\"2px\"},children:[\"Price:\",/*#__PURE__*/_jsxs(\"span\",{className:\"text-success ml-2\",children:[\"\\u20B9 \",product.price]})]})]}),/*#__PURE__*/_jsxs(Col,{sm:true,children:[/*#__PURE__*/_jsx(\"b\",{children:\"Buy\"}),/*#__PURE__*/_jsx(\"hr\",{}),product.stock?/*#__PURE__*/_jsx(Link,{to:`${product.id}/checkout/`,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Pay with Stripe\"})})}):/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:\"Out Of Stock!\"})]})]})})})]});}export default ProductDetailsPage;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","deleteProduct","getProductDetails","Message","Spinner","Row","Col","Container","Card","Button","Modal","Link","CREATE_PRODUCT_RESET","DELETE_PRODUCT_RESET","UPDATE_PRODUCT_RESET","CARD_CREATE_RESET","jsx","_jsx","jsxs","_jsxs","ProductDetailsPage","_ref","history","match","dispatch","show","setShow","handleClose","handleShow","productDetailsReducer","state","loading","error","product","userLoginReducer","userInfo","deleteProductReducer","success","productDeletionSuccess","params","id","type","confirmDelete","alert","push","children","onHide","Header","closeButton","Title","style","color","className","Body","name","Footer","variant","onClick","display","animation","md","Img","src","image","height","admin","width","sm","description","justifyContent","border","borderColor","padding","price","stock","to"],"sources":["E:/FrontendEcommerce/frontend/src/pages/ProductDetailsPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { deleteProduct, getProductDetails } from '../actions/productActions'\nimport Message from '../components/Message'\nimport { Spinner, Row, Col, Container, Card, Button, Modal } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\nimport { CREATE_PRODUCT_RESET, DELETE_PRODUCT_RESET, UPDATE_PRODUCT_RESET, CARD_CREATE_RESET } from '../constants'\n\n\nfunction ProductDetailsPage({ history, match }) {\n\n    const dispatch = useDispatch()\n\n    // modal state and functions\n    const [show, setShow] = useState(false);\n    const handleClose = () => setShow(false);\n    const handleShow = () => setShow(true);\n\n    // product details reducer\n    const productDetailsReducer = useSelector(state => state.productDetailsReducer)\n    const { loading, error, product } = productDetailsReducer\n\n    // login reducer\n    const userLoginReducer = useSelector(state => state.userLoginReducer)\n    const { userInfo } = userLoginReducer\n\n    // product details reducer\n    const deleteProductReducer = useSelector(state => state.deleteProductReducer)\n    const { success: productDeletionSuccess } = deleteProductReducer\n\n    useEffect(() => {\n        dispatch(getProductDetails(match.params.id))\n        dispatch({\n            type: UPDATE_PRODUCT_RESET\n        })\n        dispatch({\n            type: CREATE_PRODUCT_RESET\n        })\n        dispatch({\n            type: CARD_CREATE_RESET\n        })\n    }, [dispatch, match])\n\n    // product delete confirmation\n    const confirmDelete = () => {\n        dispatch(deleteProduct(match.params.id))\n        handleClose()\n    }\n\n    // after product deletion\n    if (productDeletionSuccess) {\n        alert(\"Product successfully deleted.\")\n        history.push(\"/\")\n        dispatch({\n            type: DELETE_PRODUCT_RESET\n        })\n    }\n\n    return (\n        <div>\n\n            {/* Modal Start*/}\n            <div>\n                <Modal show={show} onHide={handleClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>\n                            <i style={{ color: \"#e6e600\" }} className=\"fas fa-exclamation-triangle\"></i>\n                            {\" \"}\n                            Delete Confirmation\n                        </Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>Are you sure you want to delete this product <em>\"{product.name}\"</em>?</Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"danger\" onClick={() => confirmDelete()}>\n                            Confirm Delete\n                        </Button>\n                        <Button variant=\"primary\" onClick={handleClose}>\n                            Cancel\n                        </Button>\n                    </Modal.Footer>\n                </Modal>\n            </div>\n\n            {/* Modal End */}\n\n            {loading && <span style={{ display: \"flex\" }}>\n                <h5>Getting Product Details</h5>\n                <span className=\"ml-2\">\n                    <Spinner animation=\"border\" />\n                </span>\n            </span>}\n            {error ? <Message variant='danger'>{error}</Message>\n                :\n                <div>\n                    <Container>\n                        <Row>\n                            <Col md={6}>\n                                <Card.Img variant=\"top\" src={product.image} height=\"420\" />\n\n                                {/* Product edit and delete conditions */}\n\n                                {userInfo && userInfo.admin ?\n                                    <span style={{ display: \"flex\" }}>\n                                        < button\n                                            className=\"btn mt-2 btn-danger btn-sm button-focus-css\"\n                                            style={{ width: \"100%\" }}\n                                            onClick={() => handleShow()}\n                                        >Delete Product\n                                        </button>\n\n                                        <button\n                                            className=\"ml-2 mt-2 btn btn-primary btn-sm button-focus-css\"\n                                            onClick={() => history.push(`/product-update/${product.id}/`)}\n                                            style={{ width: \"100%\" }}\n                                        >Edit Product\n                                        </button>\n                                    </span>\n                                    : \"\"}\n                            </Col>\n\n                            <Col sm>\n                                <b>{product.name}</b>\n                                <hr />\n                                <span className=\"justify-description-css\">\n                                    <p>{product.description}</p>\n                                </span>\n                                <span style={{\n                                    display: \"flex\",\n                                    justifyContent: \"center\",\n                                    border: \"1px solid\",\n                                    borderColor: \"#C6ACE7\",\n                                    padding: \"2px\"\n                                }}>\n                                    Price:<span className=\"text-success ml-2\">â‚¹ {product.price}</span>\n                                </span>\n                            </Col>\n                            <Col sm>\n                                <b>Buy</b>\n                                <hr />\n                                {product.stock ?\n                                    <Link to={`${product.id}/checkout/`}>\n                                        <button className=\"btn btn-primary\">\n                                            <span>Pay with Stripe</span>\n                                        </button>\n                                    </Link>\n                                    :\n                                    <Message variant='danger'>\n                                        Out Of Stock!\n                                    </Message>}\n                            </Col>\n                        </Row>\n\n                    </Container>\n                </div>\n            }\n        </div >\n    )\n}\n\nexport default ProductDetailsPage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}