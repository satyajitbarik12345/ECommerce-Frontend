{"ast":null,"code":"import React,{useState}from'react';import{Row,Col,Button,Form}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{logout,userAccountDelete,checkTokenValidation}from'../actions/userActions';import Message from'../components/Message';import{Spinner}from'react-bootstrap';import{useHistory}from\"react-router-dom\";import{DELETE_USER_ACCOUNT_RESET}from'../constants';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DeleteUserAccount(){let history=useHistory();const dispatch=useDispatch();const[myPassword,setMyPassword]=useState(\"\");// login reducer\nconst userLoginReducer=useSelector(state=>state.userLoginReducer);const{userInfo}=userLoginReducer;// delete user account reducer\nconst deleteUserAccountReducer=useSelector(state=>state.deleteUserAccountReducer);const{success,loading,error}=deleteUserAccountReducer;const onSubmit=e=>{e.preventDefault();const userData={\"id\":userInfo.id,\"password\":myPassword};dispatch(checkTokenValidation());dispatch(userAccountDelete(userData));};if(success){alert(\"Account successfully deleted.\");dispatch({type:DELETE_USER_ACCOUNT_RESET});dispatch(logout());// action\nhistory.push(\"/login\");window.location.reload();}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-md-center\",children:/*#__PURE__*/_jsxs(Col,{xs:12,md:6,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Confirm your password to delete your account.\"}),loading&&/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Please wait\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})})]}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:\"Incorrect Password!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"password\",placeholder:\"enter your password\",value:myPassword,onChange:e=>setMyPassword(e.target.value)})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"danger\",children:\"Confirm Delete\"})]})})]})})});}export default DeleteUserAccount;","map":{"version":3,"names":["React","useState","Row","Col","Button","Form","useDispatch","useSelector","logout","userAccountDelete","checkTokenValidation","Message","Spinner","useHistory","DELETE_USER_ACCOUNT_RESET","jsx","_jsx","jsxs","_jsxs","DeleteUserAccount","history","dispatch","myPassword","setMyPassword","userLoginReducer","state","userInfo","deleteUserAccountReducer","success","loading","error","onSubmit","e","preventDefault","userData","id","alert","type","push","window","location","reload","children","className","xs","md","style","display","animation","variant","Group","controlId","Label","Control","required","placeholder","value","onChange","target"],"sources":["E:/FrontendEcommerce/frontend/src/pages/DeleteUserAccountPage.js"],"sourcesContent":["import React, { useState } from 'react'\nimport { Row, Col, Button, Form } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { logout, userAccountDelete, checkTokenValidation } from '../actions/userActions'\nimport Message from '../components/Message'\nimport { Spinner } from 'react-bootstrap'\nimport { useHistory } from \"react-router-dom\";\nimport { DELETE_USER_ACCOUNT_RESET } from '../constants'\n\n\nfunction DeleteUserAccount() {\n\n    let history = useHistory()\n    const dispatch = useDispatch()\n    const [myPassword, setMyPassword] = useState(\"\")\n\n    \n    // login reducer\n    const userLoginReducer = useSelector(state => state.userLoginReducer)\n    const { userInfo } = userLoginReducer\n\n    // delete user account reducer\n    const deleteUserAccountReducer = useSelector(state => state.deleteUserAccountReducer)\n    const { success, loading, error } = deleteUserAccountReducer\n\n    const onSubmit = (e) => {\n        e.preventDefault()\n        const userData = {\n            \"id\": userInfo.id,\n            \"password\": myPassword\n        }\n        dispatch(checkTokenValidation())        \n        dispatch(userAccountDelete(userData))        \n    }\n    \n    if(success) {\n        alert(\"Account successfully deleted.\")\n        dispatch({\n            type: DELETE_USER_ACCOUNT_RESET\n        })\n        dispatch(logout()) // action\n        history.push(\"/login\")\n        window.location.reload()\n    }\n\n    return (\n        <div>\n            <Row className='justify-content-md-center'>\n                <Col xs={12} md={6}>\n                    <h3>Confirm your password to delete your account.</h3>\n                    {loading && <span style = {{ display: \"flex\" }}><h5>Please wait</h5><span className = \"ml-2\"><Spinner animation=\"border\" /></span></span>}                    \n                    {error && <Message variant='danger'>Incorrect Password!</Message>}        \n                    <div className=\"mt-4\">\n                        <Form onSubmit={onSubmit}>\n                            <Form.Group controlId='password'>\n                                <Form.Label>\n                                    Password\n                            </Form.Label>\n                                <Form.Control\n                                    required\n                                    type=\"password\"\n                                    placeholder=\"enter your password\"\n                                    value={myPassword}\n                                    onChange={(e) => setMyPassword(e.target.value)}\n                                >\n                                </Form.Control>\n                            </Form.Group>\n\n                            <Button type=\"submit\" variant=\"danger\">Confirm Delete</Button>\n                        </Form>\n                    </div>\n                </Col>\n            </Row>\n        </div>\n    )\n}\n\nexport default DeleteUserAccount\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,GAAG,CAAEC,GAAG,CAAEC,MAAM,CAAEC,IAAI,KAAQ,iBAAiB,CACxD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,MAAM,CAAEC,iBAAiB,CAAEC,oBAAoB,KAAQ,wBAAwB,CACxF,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAC3C,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,OAASC,yBAAyB,KAAQ,cAAc,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGxD,QAAS,CAAAC,iBAAiBA,CAAA,CAAG,CAEzB,GAAI,CAAAC,OAAO,CAAGP,UAAU,CAAC,CAAC,CAC1B,KAAM,CAAAQ,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACgB,UAAU,CAAEC,aAAa,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CAGhD;AACA,KAAM,CAAAuB,gBAAgB,CAAGjB,WAAW,CAACkB,KAAK,EAAIA,KAAK,CAACD,gBAAgB,CAAC,CACrE,KAAM,CAAEE,QAAS,CAAC,CAAGF,gBAAgB,CAErC;AACA,KAAM,CAAAG,wBAAwB,CAAGpB,WAAW,CAACkB,KAAK,EAAIA,KAAK,CAACE,wBAAwB,CAAC,CACrF,KAAM,CAAEC,OAAO,CAAEC,OAAO,CAAEC,KAAM,CAAC,CAAGH,wBAAwB,CAE5D,KAAM,CAAAI,QAAQ,CAAIC,CAAC,EAAK,CACpBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,QAAQ,CAAG,CACb,IAAI,CAAER,QAAQ,CAACS,EAAE,CACjB,UAAU,CAAEb,UAChB,CAAC,CACDD,QAAQ,CAACX,oBAAoB,CAAC,CAAC,CAAC,CAChCW,QAAQ,CAACZ,iBAAiB,CAACyB,QAAQ,CAAC,CAAC,CACzC,CAAC,CAED,GAAGN,OAAO,CAAE,CACRQ,KAAK,CAAC,+BAA+B,CAAC,CACtCf,QAAQ,CAAC,CACLgB,IAAI,CAAEvB,yBACV,CAAC,CAAC,CACFO,QAAQ,CAACb,MAAM,CAAC,CAAC,CAAC,CAAC;AACnBY,OAAO,CAACkB,IAAI,CAAC,QAAQ,CAAC,CACtBC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC5B,CAEA,mBACIzB,IAAA,QAAA0B,QAAA,cACI1B,IAAA,CAACd,GAAG,EAACyC,SAAS,CAAC,2BAA2B,CAAAD,QAAA,cACtCxB,KAAA,CAACf,GAAG,EAACyC,EAAE,CAAE,EAAG,CAACC,EAAE,CAAE,CAAE,CAAAH,QAAA,eACf1B,IAAA,OAAA0B,QAAA,CAAI,+CAA6C,CAAI,CAAC,CACrDb,OAAO,eAAIX,KAAA,SAAM4B,KAAK,CAAI,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAL,QAAA,eAAC1B,IAAA,OAAA0B,QAAA,CAAI,aAAW,CAAI,CAAC,cAAA1B,IAAA,SAAM2B,SAAS,CAAG,MAAM,CAAAD,QAAA,cAAC1B,IAAA,CAACJ,OAAO,EAACoC,SAAS,CAAC,QAAQ,CAAE,CAAC,CAAM,CAAC,EAAM,CAAC,CACxIlB,KAAK,eAAId,IAAA,CAACL,OAAO,EAACsC,OAAO,CAAC,QAAQ,CAAAP,QAAA,CAAC,qBAAmB,CAAS,CAAC,cACjE1B,IAAA,QAAK2B,SAAS,CAAC,MAAM,CAAAD,QAAA,cACjBxB,KAAA,CAACb,IAAI,EAAC0B,QAAQ,CAAEA,QAAS,CAAAW,QAAA,eACrBxB,KAAA,CAACb,IAAI,CAAC6C,KAAK,EAACC,SAAS,CAAC,UAAU,CAAAT,QAAA,eAC5B1B,IAAA,CAACX,IAAI,CAAC+C,KAAK,EAAAV,QAAA,CAAC,UAEhB,CAAY,CAAC,cACT1B,IAAA,CAACX,IAAI,CAACgD,OAAO,EACTC,QAAQ,MACRjB,IAAI,CAAC,UAAU,CACfkB,WAAW,CAAC,qBAAqB,CACjCC,KAAK,CAAElC,UAAW,CAClBmC,QAAQ,CAAGzB,CAAC,EAAKT,aAAa,CAACS,CAAC,CAAC0B,MAAM,CAACF,KAAK,CAAE,CAErC,CAAC,EACP,CAAC,cAEbxC,IAAA,CAACZ,MAAM,EAACiC,IAAI,CAAC,QAAQ,CAACY,OAAO,CAAC,QAAQ,CAAAP,QAAA,CAAC,gBAAc,CAAQ,CAAC,EAC5D,CAAC,CACN,CAAC,EACL,CAAC,CACL,CAAC,CACL,CAAC,CAEd,CAEA,cAAe,CAAAvB,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}