{"ast":null,"code":"import React,{useEffect}from'react';import{Container,Row,Col}from'react-bootstrap';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{userDetails,logout,checkTokenValidation}from'../actions/userActions';//import { UPDATE_USER_ACCOUNT_RESET } from '../constants'\nimport Message from'../components/Message';import{Spinner}from'react-bootstrap';import{useHistory}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AccountPage(){let history=useHistory();const dispatch=useDispatch();// check token validation reducer\nconst checkTokenValidationReducer=useSelector(state=>state.checkTokenValidationReducer);const{error:tokenError}=checkTokenValidationReducer;// login reducer\nconst userLoginReducer=useSelector(state=>state.userLoginReducer);const{userInfo}=userLoginReducer;// user details reducer\nconst userDetailsReducer=useSelector(state=>state.userDetailsReducer);const{user:userAccDetails,loading}=userDetailsReducer;useEffect(()=>{if(!userInfo){history.push(\"/login\");}else{try{dispatch(checkTokenValidation());dispatch(userDetails(userInfo.id));}catch(error){history.push(\"/\");}}},[history,userInfo,dispatch]);// logout\nconst logoutHandler=()=>{dispatch(logout());// action\n};if(userInfo&&tokenError===\"Request failed with status code 401\"){alert(\"Session expired, please login again.\");dispatch(logout());history.push(\"/login\");window.location.reload();}const renderData=()=>{try{return/*#__PURE__*/_jsxs(\"div\",{children:[loading&&/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Getting User Information\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})})]}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Row,{className:\"mr-6 mb-2 border border-dark\",children:[/*#__PURE__*/_jsx(Col,{xs:2,className:\"p-3 bg-info text-white\",children:\"Name:\"}),/*#__PURE__*/_jsx(Col,{className:\"p-3\",children:userAccDetails.username})]}),/*#__PURE__*/_jsxs(Row,{className:\"mb-2 border border-dark\",children:[/*#__PURE__*/_jsx(Col,{xs:2,className:\"p-3 bg-info text-white\",children:\"Email:\"}),/*#__PURE__*/_jsx(Col,{className:\"p-3\",children:userAccDetails.email})]}),/*#__PURE__*/_jsxs(Row,{className:\"mb-2 border border-dark\",children:[/*#__PURE__*/_jsx(Col,{xs:2,className:\"p-3 bg-info text-white\",children:\"Admin Privileges:\"}),/*#__PURE__*/_jsx(Col,{className:\"p-3\",children:userAccDetails.admin?\"Yes\":\"No\"})]})]}),/*#__PURE__*/_jsxs(\"span\",{style:{display:'flex',justifyContent:'center',alignItems:'center'},children:[/*#__PURE__*/_jsx(Link,{to:`/account/update`,children:\"Update Account details\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 text-primary\",children:\"| \"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-1\"}),/*#__PURE__*/_jsx(Link,{to:`/account/delete/`,children:\"Delete Account\"})]})]});}catch(error){return/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\"Something went wrong, go back to \",/*#__PURE__*/_jsx(Link,{onClick:logoutHandler,to:`/login`,children:\" Login\"}),\" page.\"]});}};return renderData();}export default AccountPage;","map":{"version":3,"names":["React","useEffect","Container","Row","Col","Link","useDispatch","useSelector","userDetails","logout","checkTokenValidation","Message","Spinner","useHistory","jsx","_jsx","jsxs","_jsxs","AccountPage","history","dispatch","checkTokenValidationReducer","state","error","tokenError","userLoginReducer","userInfo","userDetailsReducer","user","userAccDetails","loading","push","id","logoutHandler","alert","window","location","reload","renderData","children","style","display","className","animation","xs","username","email","admin","justifyContent","alignItems","to","variant","onClick"],"sources":["E:/FrontendEcommerce/frontend/src/pages/AccountPage.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { Container, Row, Col } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { userDetails, logout, checkTokenValidation } from '../actions/userActions'\n//import { UPDATE_USER_ACCOUNT_RESET } from '../constants'\nimport Message from '../components/Message'\nimport { Spinner } from 'react-bootstrap'\nimport {useHistory} from 'react-router-dom'\n\n\nfunction AccountPage() {\n\n\n    let history = useHistory()\n    const dispatch = useDispatch()\n\n    // check token validation reducer\n    const checkTokenValidationReducer = useSelector(state => state.checkTokenValidationReducer)\n    const { error: tokenError } = checkTokenValidationReducer\n\n    // login reducer\n    const userLoginReducer = useSelector(state => state.userLoginReducer)\n    const { userInfo } = userLoginReducer\n\n    // user details reducer\n    const userDetailsReducer = useSelector(state => state.userDetailsReducer)\n    const { user: userAccDetails, loading } = userDetailsReducer\n\n    useEffect(() => {\n        if (!userInfo) {\n            history.push(\"/login\")\n        } else {\n            try {\n                dispatch(checkTokenValidation())\n                dispatch(userDetails(userInfo.id))\n            } catch (error) {\n                history.push(\"/\")\n            }\n        }\n    }, [history, userInfo, dispatch])\n\n    // logout\n    const logoutHandler = () => {\n        dispatch(logout()) // action\n    }\n\n    if (userInfo && tokenError === \"Request failed with status code 401\") {\n        alert(\"Session expired, please login again.\")\n        dispatch(logout())\n        history.push(\"/login\")\n        window.location.reload()\n      }\n\n    const renderData = () => {\n        try {\n\n            return (\n                <div>\n                    {loading && <span style = {{ display: \"flex\" }}><h5>Getting User Information</h5><span className = \"ml-2\"><Spinner animation=\"border\" /></span></span>}\n                    <Container>\n                        <Row className=\"mr-6 mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Name:</Col>\n                            <Col className=\"p-3\">{userAccDetails.username}</Col>\n                        </Row>\n                        <Row className=\"mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Email:</Col>\n                            <Col className=\"p-3\">{userAccDetails.email}</Col>\n                        </Row>\n                        <Row className=\"mb-2 border border-dark\">\n                            <Col xs={2} className=\"p-3 bg-info text-white\">Admin Privileges:</Col>\n                            <Col className=\"p-3\">{userAccDetails.admin ? \"Yes\" : \"No\"}</Col>\n                        </Row>\n                    </Container>\n                    <span style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                        <Link to={`/account/update`}>Update Account details</Link>\n                        <span className=\"ml-1 text-primary\">| </span>\n                        <span className=\"ml-1\"></span>\n\n                        <Link to={`/account/delete/`}>Delete Account</Link>\n                    </span>\n                </div>\n            )\n        } catch (error) {\n            return <Message variant='danger'>Something went wrong, go back to <Link\n                onClick={logoutHandler} to={`/login`}\n            > Login</Link> page.</Message>\n        }\n    }\n\n\n    return renderData()\n\n}\n\nexport default AccountPage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}