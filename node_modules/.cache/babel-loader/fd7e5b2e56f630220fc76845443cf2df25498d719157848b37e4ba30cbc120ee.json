{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Spinner,Form,Button,Card}from'react-bootstrap';import{chargeCustomer}from'../actions/cardActions';import{Link,useHistory}from\"react-router-dom\";import{getSingleAddress}from'../actions/userActions';import Message from'./Message';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChargeCardComponent=_ref=>{let{product,match,selectedAddressId,addressSelected}=_ref;let history=useHistory();const dispatch=useDispatch();// create card reducer\nconst createCardReducer=useSelector(state=>state.createCardReducer);const{cardData}=createCardReducer;// charge card reducer\nconst chargeCardReducer=useSelector(state=>state.chargeCardReducer);const{success:chargeSuccessfull,error:chargeError,loading:chargingStatus}=chargeCardReducer;// get single address reducer    \nconst getSingleAddressReducer=useSelector(state=>state.getSingleAddressReducer);const{address}=getSingleAddressReducer;useEffect(()=>{dispatch(getSingleAddress(selectedAddressId));},[dispatch,match,selectedAddressId]);// charge card handler\nconst onSubmit=e=>{e.preventDefault();const address_detail=`${address.house_no}, near ${address.landmark}, ${address.city}, \n        ${address.state}, ${address.pin_code}`;const data={\"email\":cardData.email,\"source\":cardData.id,\"amount\":product.price,\"name\":address.name,\"card_number\":cardData.card_data.last4,\"address\":address_detail,\"ordered_item\":product.name,\"paid_status\":true,\"total_price\":product.price,\"is_delivered\":false,\"delivered_at\":\"Not Delivered\"};dispatch(chargeCustomer(data));};if(chargeSuccessfull){history.push({pathname:'/payment-status/',state:{detail:product}});window.location.reload();}return/*#__PURE__*/_jsxs(\"div\",{children:[chargeError?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:chargeError}):\"\",/*#__PURE__*/_jsx(\"span\",{className:\"text-info\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Confirm payment\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[\"Using Card: XXXX XXXX XXXX \",cardData.card_data.last4]}),/*#__PURE__*/_jsx(Form,{onSubmit:onSubmit,children:chargingStatus?/*#__PURE__*/_jsxs(Button,{variant:\"primary\",disabled:true,style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"grow\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}),\" \",\"Processing Payment...\"]}):/*#__PURE__*/_jsxs(Button,{variant:\"primary\",type:\"submit\",style:{width:\"100%\"},children:[\"Pay \\u20B9\",product.price]})}),/*#__PURE__*/_jsx(Card,{className:\"p-2 mt-2 mb-2\",style:{border:\"1px solid\",borderColor:\"#C6ACE7\"},children:address?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-info\",children:/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsx(\"em\",{children:\"Will be delievered at this address\"})})}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name: \"}),address?address.name:\"\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Phone Number: \"}),address?address.phone_number:\"\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"House Number: \"}),address?address.house_no:\"\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Landmark: \"}),address?address.landmark:\"\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"City: \"}),address?address.city:\"\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"State: \"}),address?address.state:\"\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Pin Code/Zip Code: \"}),address?address.pin_code:\"\"]})]}):\"\"}),/*#__PURE__*/_jsx(Link,{to:\"#\",onClick:()=>window.location.reload(),children:\"Select a different card to pay\"})]});};export default ChargeCardComponent;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Spinner","Form","Button","Card","chargeCustomer","Link","useHistory","getSingleAddress","Message","jsx","_jsx","jsxs","_jsxs","ChargeCardComponent","_ref","product","match","selectedAddressId","addressSelected","history","dispatch","createCardReducer","state","cardData","chargeCardReducer","success","chargeSuccessfull","error","chargeError","loading","chargingStatus","getSingleAddressReducer","address","onSubmit","e","preventDefault","address_detail","house_no","landmark","city","pin_code","data","email","id","price","name","card_data","last4","push","pathname","detail","window","location","reload","children","variant","className","disabled","style","width","as","animation","size","role","type","border","borderColor","phone_number","to","onClick"],"sources":["E:/FrontendEcommerce/frontend/src/components/ChargeCardComponent.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Spinner, Form, Button, Card } from 'react-bootstrap'\nimport { chargeCustomer } from '../actions/cardActions'\nimport { Link, useHistory } from \"react-router-dom\";\nimport { getSingleAddress } from '../actions/userActions'\nimport Message from './Message'\n\n\nconst ChargeCardComponent = ({ product, match, selectedAddressId, addressSelected }) => {\n\n    let history = useHistory()\n    const dispatch = useDispatch()\n\n    // create card reducer\n    const createCardReducer = useSelector(state => state.createCardReducer)\n    const { cardData } = createCardReducer\n\n    // charge card reducer\n    const chargeCardReducer = useSelector(state => state.chargeCardReducer)\n    const { success: chargeSuccessfull, error: chargeError, loading: chargingStatus } = chargeCardReducer\n\n    // get single address reducer    \n    const getSingleAddressReducer = useSelector(state => state.getSingleAddressReducer)\n    const { address } = getSingleAddressReducer\n\n    useEffect(() => {\n        dispatch(getSingleAddress(selectedAddressId))\n    }, [dispatch, match, selectedAddressId])\n\n    // charge card handler\n    const onSubmit = (e) => {\n        e.preventDefault()\n        const address_detail = `${address.house_no}, near ${address.landmark}, ${address.city}, \n        ${address.state}, ${address.pin_code}`\n        const data = {\n            \"email\": cardData.email,\n            \"source\": cardData.id,\n            \"amount\": product.price,\n            \"name\": address.name,\n            \"card_number\": cardData.card_data.last4,\n            \"address\": address_detail,\n            \"ordered_item\": product.name,\n            \"paid_status\": true,\n            \"total_price\": product.price,\n            \"is_delivered\": false,\n            \"delivered_at\": \"Not Delivered\",\n        }\n        dispatch(chargeCustomer(data))\n    }\n\n    if (chargeSuccessfull) {\n        history.push({\n            pathname: '/payment-status/',\n            state: { detail: product }\n        })\n        window.location.reload()\n    }\n\n    return (\n        <div>\n            {chargeError ? <Message variant=\"danger\">{chargeError}</Message> : \"\"}\n            <span className=\"text-info\">\n                <h5>Confirm payment</h5>\n            </span>\n            <div className=\"mb-2\">\n                Using Card: XXXX XXXX XXXX {cardData.card_data.last4}\n            </div>\n            <Form onSubmit={onSubmit}>\n\n                {chargingStatus ?\n                    <Button variant=\"primary\" disabled style={{ width: \"100%\" }}>\n                        <Spinner\n                            as=\"span\"\n                            animation=\"grow\"\n                            size=\"sm\"\n                            role=\"status\"\n                            aria-hidden=\"true\"\n                        />\n                        {\" \"}Processing Payment...\n                    </Button>\n                    :\n                    <Button variant=\"primary\" type=\"submit\" style={{ width: \"100%\" }}>\n                        Pay â‚¹{product.price}\n                    </Button>\n                }\n            </Form>\n\n            <Card\n                className=\"p-2 mt-2 mb-2\"\n                style={{ border: \"1px solid\", borderColor: \"#C6ACE7\" }}\n            >\n                {address ?\n                    <div>\n                        <span className=\"text-info\">\n                            <b><em>Will be delievered at this address</em></b>\n                        </span>\n                        <p></p>\n                        <p><b>Name: </b>{address ? address.name : \"\"}</p>\n                        <p><b>Phone Number: </b>{address ? address.phone_number : \"\"}</p>\n                        <p><b>House Number: </b>{address ? address.house_no : \"\"}</p>\n                        <p><b>Landmark: </b>{address ? address.landmark : \"\"}</p>\n                        <p><b>City: </b>{address ? address.city : \"\"}</p>\n                        <p><b>State: </b>{address ? address.state : \"\"}</p>\n                        <p><b>Pin Code/Zip Code: </b>{address ? address.pin_code : \"\"}</p>\n                    </div>\n                    :\n                    \"\"\n                }\n            </Card>\n            <Link to=\"#\" onClick={() => window.location.reload()}>Select a different card to pay</Link>\n\n        </div >\n    )\n}\n\nexport default ChargeCardComponent\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}